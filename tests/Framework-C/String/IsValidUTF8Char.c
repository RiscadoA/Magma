#include "../../Test.h"

#include <Magma/Framework/String/UTF8.h>

int main()
{
	// Valid chars
	{
		mfsUTF8CodeUnit valid[][4] =
		{
			{ 0x24, 0x00, 0x00, 0x00 },
			{ 0xC2, 0xA2, 0x00, 0x00 },
			{ 0xE2, 0x82, 0xAC, 0x00 },
			{ 0xF0, 0x90, 0x8D, 0x88 },

			{ 0x00, 0x00, 0x00, 0x00 }
		};

		for (int i = 0; valid[i][0] != 0x00; ++i)
			TEST_REQUIRE_PASS(mfsIsValidUTF8Char(valid[i]) == MFM_TRUE);
	}

	// Invalid chars
	{
		mfsUTF8CodeUnit invalid[][4] =
		{
			{ 0xED, 0xA0, 0x80, 0x00 },
			{ 0xC0, 0x00, 0x00, 0x00 },
			{ 0xC1, 0x00, 0x00, 0x00 },
			{ 0xF5, 0x00, 0x00, 0x00 },
			{ 0xFC, 0x83, 0xBF, 0xBF },
			{ 0xFE, 0x00, 0x00, 0x00 },
			{ 0xFF, 0x00, 0x00, 0x00 },
			{ 0xFE, 0xFE, 0xFF, 0xFF },
			{ 0x80, 0x00, 0x00, 0x00 },

			{ 0x00, 0x00, 0x00, 0x00 }
		};

		for (int i = 0; invalid[i][0] != 0x00; ++i)
			TEST_REQUIRE_FAIL(mfsIsValidUTF8Char(invalid[i]) == MFM_TRUE);
	}

	EXIT_PASS();
}
