#include "Testing.hpp"

#include "../Magma/Framework/String/UTF8.hpp"

int main()
{
	using namespace Magma::Framework::String;

	// Valid chars
	{
		U8CodePoint valid[][4] =
		{
			{ 0x24, 0x00, 0x00, 0x00 },
			{ 0xC2, 0xA2, 0x00, 0x00 },
			{ 0xE2, 0x82, 0xAC, 0x00 },
			{ 0xF0, 0x90, 0x8D, 0x88 },

			{ 0x00, 0x00, 0x00, 0x00 }
		};

		for (int i = 0; valid[i][0] != 0x00; ++i)
			TEST_REQUIRE_PASS(IsValidU8Char(valid[i]));
	}

	// Invalid chars
	{
		U8CodePoint invalid[][4] =
		{
			{ 0xED, 0xA0, 0x80, 0x00 },
			{ 0xC0, 0x00, 0x00, 0x00 },
			{ 0xC1, 0x00, 0x00, 0x00 },
			{ 0xF5, 0x00, 0x00, 0x00 },
			{ 0xFC, 0x83, 0xBF, 0xBF },
			{ 0xFE, 0x00, 0x00, 0x00 },
			{ 0xFF, 0x00, 0x00, 0x00 },
			{ 0xFE, 0xFE, 0xFF, 0xFF },
			{ 0x80, 0x00, 0x00, 0x00 },

			{ 0x00, 0x00, 0x00, 0x00 }
		};

		for (int i = 0; invalid[i][0] != 0x00; ++i)
			TEST_REQUIRE_FAIL(IsValidU8Char(invalid[i]));
	}

	EXIT_PASS();
}